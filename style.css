:root {
    --phi: 1.618;
    --ink: #121A21;
    --gold: #C5A059;
    --paper: #FDFBF7;
    --dim: rgba(18, 26, 33, 0.6);
    --silo-bg: #0F1418;
}

/* 1. CORE ERGONOMICS */
body, html {
    margin: 0; padding: 0; height: 100%; width: 100%;
    background-color: var(--silo-bg);
    color: var(--ink);
    font-family: 'Georgia', serif;
    overflow: hidden; /* No vertical scroll */
    touch-action: manipulation; /* Kill 300ms delay */
}

#app-container {
    height: 100%; width: 100%;
    display: flex; flex-direction: column;
}

/* 2. THE SILO MATERIAL LAYER */
#ambient-silo {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-image: url('stone-texture.jpg'); /* User uploaded image */
    background-size: cover;
    opacity: 0.3; z-index: -2;
}

#torch-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: radial-gradient(circle at center, transparent 20%, #000 100%);
    z-index: -1;
}

/* 3. GOLDEN RATIO CONTAINERS (Vertical Viewport) */
.screen {
    display: none; height: 100%; width: 100%;
    flex-direction: column;
}
.screen.active { display: flex; }

.phi-box-support {
    flex: 1; /* Approx 38.2% */
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    padding: 20px;
}

.phi-box-interaction {
    flex: 1.618; /* Approx 61.8% - Thumb Zone */
    padding: 30px;
    display: flex; flex-direction: column;
    justify-content: flex-start;
}

/* 4. THE INK STYLES */
.ink-main-display {
    font-size: clamp(3.5rem, 15vw, 6rem);
    font-weight: bold;
    text-align: center;
    margin: 20px 0;
    transition: transform 0.2s, opacity 0.4s;
}

.ink-trace-faint { opacity: 0.15; filter: blur(1px); }

/* 5. THUMB-ZONE BUTTONS */
button {
    background: var(--ink); color: white;
    padding: 20px; border: none; border-radius: 4px;
    font-weight: bold; letter-spacing: 2px;
    margin-bottom: 12px; font-size: 1rem;
    box-shadow: 0 10px 20px rgba(0,0,0,0.3);
}

button:active { background: var(--gold); transform: scale(0.98); }

.btn-nav-back {
    position: absolute; top: env(safe-area-inset-top, 20px); left: 20px;
    padding: 10px; font-size: 0.8rem; background: transparent; box-shadow: none;
}

/* 6. PROGRESS RING */
.ring-container { position: relative; width: 180px; margin: 20px auto; }
.ring-track { fill: none; stroke: rgba(255,255,255,0.1); stroke-width: 8; }
.ring-fill {
    fill: none; stroke: var(--gold); stroke-width: 8;
    stroke-dasharray: 283; stroke-dashoffset: 283;
    transition: stroke-dashoffset 2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 7. FEEDBACK ANIMATIONS */
.shake { animation: shakeEffect 0.4s; }
@keyframes shakeEffect {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-12px); }
    75% { transform: translateX(12px); }
}

/* 8. CHAPTER GRID (Vertical Map) */
#chapter-grid {
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px;
}
.chap-node {
    width: 60px; height: 60px; border: 1px solid var(--gold);
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    color: var(--gold); font-weight: bold;
}
